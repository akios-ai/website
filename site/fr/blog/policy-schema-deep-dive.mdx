<header class="post-header">
  <div class="post-meta">
    22 Janvier 2026 &bull; <span>6 min de lecture</span>
  </div>
  <h1>Plong√©e dans le Sch√©ma de Politique (v1)</h1>
</header>

<div class="post-content">

Le sch√©ma de politique v1 est intentionnellement petit. Mais petit ne veut pas dire simple ‚Äî chaque cl√© contr√¥le une fronti√®re de s√©curit√© r√©elle. Cet article explique ce que fait chaque bloc, pourquoi il existe, et comment l'utiliser.

## Pourquoi la Politique en tant que Code ?

La plupart de la s√©curit√© IA est appliqu√©e par convention : les d√©veloppeurs promettent de ne pas faire de b√™tises. AKIOS adopte une approche diff√©rente ‚Äî la s√©curit√© est appliqu√©e par du **code**, valid√©e avant ex√©cution, et sign√©e cryptographiquement. Si la politique ne l'autorise pas, √ßa n'arrive pas.

```mermaid
graph LR
    YAML["Politique YAML"] -->|"parse + validation"| Engine["Moteur de Politique"]
    Engine -->|"signature"| Signed["Politique Sign√©e\n(SHA-256)"]
    Signed -->|"chargement dans la cage"| Cage["Cage de S√©curit√©"]

    subgraph CAGE_RUNTIME["Application au Runtime"]
        Cage --> FS_CHECK{"Requ√™te\nfilesystem ?"}
        Cage --> HTTP_CHECK{"Requ√™te\nHTTP ?"}
        Cage --> LLM_CHECK{"Appel\nLLM ?"}
        Cage --> TOOL_CHECK{"Ex√©cution\noutil ?"}

        FS_CHECK -->|"chemin autoris√© ?"| FS_ALLOW["‚úÖ Autoriser"]
        FS_CHECK -->|"refus√©"| FS_BLOCK["‚ùå Bloquer + Log"]
        HTTP_CHECK -->|"h√¥te autoris√© ?"| HTTP_ALLOW["‚úÖ Autoriser"]
        HTTP_CHECK -->|"refus√©"| HTTP_BLOCK["‚ùå Bloquer + Log"]
        LLM_CHECK -->|"dans le budget ?"| LLM_ALLOW["‚úÖ Autoriser"]
        LLM_CHECK -->|"d√©passement"| LLM_KILL["üõë Coupe-Circuit"]
        TOOL_CHECK -->|"liste blanche ?"| TOOL_ALLOW["‚úÖ Autoriser"]
        TOOL_CHECK -->|"refus√©"| TOOL_BLOCK["‚ùå Bloquer + Log"]
    end
```

## Les Blocs du Sch√©ma

La politique v1 a six blocs de premier niveau. Voici ce que chacun fait :

<table>
  <thead>
    <tr><th>Bloc</th><th>Contr√¥le</th><th>D√©faut</th><th>Impact S√©curit√©</th></tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>filesystem</strong></td>
      <td>Quels chemins les agents peuvent lire/√©crire</td>
      <td>Tout interdire</td>
      <td>Emp√™che l'exfiltration de donn√©es via les fichiers locaux</td>
    </tr>
    <tr>
      <td><strong>http</strong></td>
      <td>Quels h√¥tes/m√©thodes/d√©bits sont autoris√©s</td>
      <td>Tout interdire</td>
      <td>Emp√™che les appels r√©seau non autoris√©s</td>
    </tr>
    <tr>
      <td><strong>llm</strong></td>
      <td>Fournisseur, mod√®le, tokens, budget</td>
      <td>Aucun fournisseur</td>
      <td>Emp√™che les d√©passements de co√ªts et l'abus de mod√®le</td>
    </tr>
    <tr>
      <td><strong>tools</strong></td>
      <td>Quelles commandes peuvent s'ex√©cuter</td>
      <td>Tout interdire</td>
      <td>Emp√™che l'ex√©cution arbitraire de commandes</td>
    </tr>
    <tr>
      <td><strong>audit</strong></td>
      <td>Cha√Æne Merkle, anonymisation DCP, export</td>
      <td>Activ√©</td>
      <td>Fournit une preuve inviolable de l'ex√©cution</td>
    </tr>
    <tr>
      <td><strong>pii_redaction</strong></td>
      <td>Quels motifs d√©tecter et anonymiser</td>
      <td>Activ√© (standard)</td>
      <td>Emp√™che les donn√©es sensibles d'atteindre l'agent</td>
    </tr>
  </tbody>
</table>

### Filesystem

Contr√¥le ce que l'agent peut voir et modifier sur le disque :

```yaml
filesystem:
  allow:
    - path: "/srv/akios/readme.md"
      mode: "r"           # lecture seule
    - path: "/workspace/output"
      mode: "w"           # √©criture autoris√©e
  deny_writes: true       # bloqu√© partout ailleurs
```

**R√®gle cl√© :** Les chemins non list√©s sont invisibles pour l'agent. Il ne peut m√™me pas d√©tecter qu'ils existent.

### HTTP

Contr√¥le quels services externes l'agent peut contacter :

```yaml
http:
  allow:
    - host: "api.openai.com"
      methods: ["POST"]
      rate_limit_per_min: 30
    - host: "docs.example.com"
      methods: ["GET"]
      rate_limit_per_min: 60
  redact_headers: ["authorization", "cookie", "x-api-key"]
```

**R√®gle cl√© :** Chaque requ√™te passe par le moteur d'anonymisation DCP. M√™me les requ√™tes autoris√©es voient leurs en-t√™tes sensibles supprim√©s.

### LLM

Contr√¥le le mod√®le IA et les d√©penses :

```yaml
llm:
  provider: "openai"
  model: "gpt-4.1"
  max_tokens: 1200
  budget_usd: 0.25
  redact_prompts: true
  redact_responses: true
```

**R√®gle cl√© :** Quand `budget_usd` est d√©pass√©, le workflow est **tu√© imm√©diatement** ‚Äî pas apr√®s l'appel en cours. C'est un coupe-circuit dur, pas un avertissement.

### Tools (Commandes)

Contr√¥le quelles commandes shell l'agent peut ex√©cuter :

```yaml
tools:
  allow:
    - name: "jq"
      args: ["."]
    - name: "grep"
      args: ["-n", "ERROR"]
  working_dir: "/workspace"
  timeout_sec: 20
```

**R√®gle cl√© :** Seules 17 commandes pr√©-approuv√©es sont disponibles. Chacune s'ex√©cute dans un sous-processus sandbox√© avec filtrage syscall et limites de sortie (1 Mo).

### Audit

Contr√¥le la journalisation inviolable :

```yaml
audit:
  merkle: true
  pii_redaction: true
  export_format: jsonl
  retention_days: 2555  # 7 ans
```

**R√®gle cl√© :** La cha√Æne Merkle est append-only. Si une entr√©e est modifi√©e, la cha√Æne de hash se brise et la v√©rification √©choue. C'est une preuve cryptographique, pas un simple fichier de log.

### Anonymisation DCP

Contr√¥le quels motifs de donn√©es sensibles sont d√©tect√©s :

```yaml
pii_redaction:
  enabled: true
  mode: aggressive
  patterns: [nir, siret, carte_bancaire, iban, email, telephone, cle_api]
```

**R√®gle cl√© :** En mode `aggressive`, le moteur favorise l'anonymisation excessive. Les faux positifs sont pr√©f√©rables aux fuites de donn√©es.

## Politique Compl√®te

```yaml
version: 1
name: "resume-documents"

filesystem:
  allow:
    - path: "/workspace/docs"
      mode: "r"
http:
  allow:
    - host: "api.openai.com"
      methods: ["POST"]
      rate_limit_per_min: 10
  redact_headers: ["authorization", "cookie"]
llm:
  provider: "openai"
  model: "gpt-4.1"
  max_tokens: 1500
  budget_usd: 0.30
  redact_prompts: true
  redact_responses: true
tools:
  allow:
    - name: "jq"
    - name: "grep"
  working_dir: "/workspace"
  timeout_sec: 20
audit:
  merkle: true
  pii_redaction: true
  export_format: jsonl
pii_redaction:
  enabled: true
  mode: aggressive
```

## Valider votre Politique

Toujours valider avant de d√©ployer :

```bash
# Le dry-run valide la politique sans l'ex√©cuter
akios run --dry-run mon-workflow.yml

# Signer la politique pour l'utilisation en production
akios policy sign mon-workflow.yml

# V√©rifier une politique sign√©e
akios policy verify mon-workflow.yml.sig
```

## Essayez-le Vous-m√™me

```bash
pip install akios
akios init mon-projet
akios run templates/hello-workflow.yml
```

Gardez les politiques petites, explicites et sign√©es. C'est ainsi que la cage reste pr√©visible.

S√©curisez votre IA. Construisez avec AKIOS.

</div>

<div class="post-footer">
  <p>Connexe : <a href="hardening-checklist.html">Checklist de Durcissement</a> | <a href="secure-agent-communication.html">Communication S√©curis√©e entre Agents</a></p>
  <div class="share-links">
    <span>Partager :</span>
    <a href="#" target="_blank">Twitter</a>
    <a href="#" target="_blank">LinkedIn</a>
    <a href="#" target="_blank">Hacker News</a>
  </div>
  <a href="./">‚Üê Retour au Blog</a>
</div>
