---
title: Guide du Schéma de Workflow
description: Référence complète pour la structure, la validation et les agents des workflows AKIOS V1.0.
---

# Guide du Schéma de Workflow AKIOS V1.0

**Version 1.0.0** | **Dernière mise à jour :** 26 Janvier 2026

## Aperçu

AKIOS inclut une validation automatique des workflows pour s'assurer que vos workflows personnalisés sont structurés correctement et s'exécuteront de manière fiable. Cette validation aide à détecter les erreurs courantes avant qu'elles ne causent des problèmes.

## Qu'est-ce que la Validation de Workflow ?

La validation de workflow garantit que votre fichier `workflow.yml` suit la structure correcte attendue par AKIOS. Pensez-y comme un assistant amical qui vérifie votre workflow pour détecter les problèmes évidents avant de l'exécuter.

### Avantages Clés

- **Détection précoce des erreurs** - Sachez immédiatement si votre workflow a des problèmes structurels
- **Messages d'erreur clairs** - Obtenez des conseils utiles lorsque quelque chose ne va pas
- **Invisible en fonctionnement** - Aucun impact sur les workflows valides
- **Expérience cohérente** - Tous les workflows suivent la même structure fiable

## Ce qui est Validé

### Structure de Workflow Requise

Chaque workflow doit comporter ces trois éléments :

```yaml
name: "Nom de votre Workflow"         # Requis : Chaîne de caractères
description: "Ce qu'il fait"          # Requis : Chaîne de caractères
steps:                                # Requis : Tableau d'étapes
  # ... les étapes du workflow vont ici
```

### Structure d'une Étape

Chaque étape de votre workflow doit inclure :

```yaml
steps:
  - step: 1                       # Optionnel : Numéro d'étape (recommandé) ou ID unique
    agent: llm                    # Requis : Un des 4 agents
    action: complete              # Requis : Action spécifique à l'agent
    config: {}                    # Optionnel : Configuration de l'agent
    parameters: {}                # Requis : Paramètres de l'action
```

### Agents Autorisés

AKIOS V1.0 prend en charge exactement 4 agents :

| Agent | But | Exemples d'Actions |
|-------|-----|-------------------|
| `llm` | Appels de modèles de langage IA | `complete`, `chat` |
| `http` | Appels API Web | `get`, `post`, `put`, `delete` |
| `filesystem` | Opérations sur les fichiers | `read`, `write`, `stat` |
| `tool_executor` | Commandes système | `run` |

## Erreurs de Validation Courantes

### Champs Requis Manquants

**Erreur :** `Step 1: missing required field 'action'`

**Correction :** Ajoutez le champ manquant à votre étape :
```yaml
steps:
  - step: 1
    agent: llm
    action: complete  # ← Ajoutez ceci
    parameters: { "prompt": "Bonjour" }
```

### Agent Inconnu

**Erreur :** `Step 1 uses unknown agent 'gpt'. Valid agents: filesystem, http, llm, tool_executor`

**Correction :** Utilisez l'un des 4 agents pris en charge :
```yaml
agent: llm  # ← Utilisez llm au lieu de gpt
```

### Action Invalide pour l'Agent

**Erreur :** `Step 1: action 'execute' not allowed for agent 'filesystem'. Must be one of: read, write, stat`

**Correction :** Utilisez une action prise en charge par cet agent :
```yaml
agent: filesystem
action: read  # ← Utilisez read au lieu de execute
```

## Exemples de Workflows Valides

### Workflow LLM Simple
```yaml
name: "Générateur de Salutations IA"
description: "Générer une salutation créative en utilisant l'IA"

steps:
  - step: 1
    agent: llm
    action: complete
    parameters:
      prompt: "Générez une salutation créative"
      max_tokens: 50
```

### Workflow Multi-Étapes
```yaml
name: "Pipeline de Traitement de Données"
description: "Lire les données, traiter avec l'IA, sauvegarder les résultats"

steps:
  - step: 1
    agent: filesystem
    action: read
    parameters:
      path: "./data/input.txt"

  - step: 2
    agent: llm
    action: complete
    parameters:
      prompt: "Résumez ces données : {{step_1.content}}"
      max_tokens: 100

  - step: 3
    agent: filesystem
    action: write
    parameters:
      path: "./data/summary.txt"
      content: "{{step_2.text}}"
```

## Personnalisation de Modèle

Lorsque vous personnalisez des modèles (comme `templates/hello-workflow.yml`), la validation garantit que vos modifications ne cassent pas la structure de base.

### Personnalisations Sûres

Ces modifications sont validées et fonctionneront :

```yaml
# ✅ Modifier les paramètres
parameters:
  prompt: "Votre prompt personnalisé ici"
  max_tokens: 100

# ✅ Modifier la config de l'agent
config:
  provider: grok
  model: grok-3

# ✅ Ajouter de nouvelles étapes (en suivant la structure)
- step: 4
  agent: filesystem
  action: write
  parameters:
    path: "./output.txt"
    content: "Fait !"
```

### Ce qui ne Fonctionnera Pas

Ces éléments déclencheront des erreurs de validation :

```yaml
# ❌ Mauvais nom d'agent
agent: openai  # Utilisez 'llm' à la place

# ❌ Action invalide
action: generate_text  # Utilisez 'complete' à la place

# ❌ Champs requis manquants
- step: 1
  agent: llm
  # Manque 'action' et 'parameters'
```

## Comportement de Validation

### Lorsque la Validation Réussit
- ✅ Le workflow s'exécute normalement
- ✅ Aucun message de validation affiché
- ✅ Zéro impact sur les performances

### Lorsque la Validation Échoue
- ❌ Le workflow s'arrête avant l'exécution
- ❌ Message d'erreur clair expliquant le problème
- ❌ Conseils utiles sur la façon de corriger

### Exemple de Flux d'Erreur

```bash
$ ./akios run workflow.yml
Error: Workflow validation failed:
- Error: Invalid workflow configuration
  Step 2 is missing the 'action' field

  Each step needs: agent, action, parameters
  Hint: Check your workflow.yml and compare with the original template.
```
