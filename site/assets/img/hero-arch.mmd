flowchart LR
  %% Palette tuned to hero section; darker arrows for contrast
  classDef core fill:#06b6d4,stroke:#06b6d4,stroke-width:3,color:#18181b,font-weight:700
  classDef layer fill:#ffffff,stroke:#06b6d4,stroke-width:2.25,color:#18181b,font-weight:650
  classDef aux fill:#fafafa,stroke:#e4e4e7,stroke-width:2,color:#52525b,font-weight:550
  linkStyle default stroke:#18181b,stroke-width:2.25,color:#18181b

  U[Clients / CLI / SDK]:::layer
  CI[CI/CD & Automation]:::layer
  APP[AI Apps & Agents]:::layer

  subgraph CP[Control Plane]
    direction TB
    PR[Policy Repo + Signer]:::layer
    PE[Policy Engine]:::layer
    PR --> PE
  end

  subgraph DP[Data Plane]
    direction TB
    OR[Runtime Orchestrator]:::layer
    SB[Sandbox Kernel\nseccomp · cgroups · userns]:::layer
    PII[PII Guard\nredaction + filtering]:::layer
    BGT[Cost & Loop Guard\nbudget / stalls]:::layer
    AUD[Audit & Attestation\nMerkle + signatures]:::layer
    OR --> SB --> PII --> BGT --> AUD
  end

  DEST[Destinations\nAPIs · DBs · Cloud · Tools]:::layer

  U --> CP
  CI --> CP
  APP --> DP
  CP --> DP
  DP --> DEST

  class U,CI,APP,CP,DP,DEST core
